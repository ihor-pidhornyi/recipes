"use strict";(self.webpackChunkrecipes=self.webpackChunkrecipes||[]).push([[230],{6230:(L,S,r)=>{r.r(S),r.d(S,{ShoppingModule:()=>F});var d=r(9808),a=r(3075),p=r(3738),_=r(9224),b=r(7531),u=r(7423),y=r(4834),h=r(8099),f=r(8966),I=r(1083),v=r(1135),t=r(5e3),C=r(7579),T=r(2722),x=r(7322);function $(e,s){if(1&e){const n=t.EpF();t.TgZ(0,"button",7),t.NdJ("click",function(){return t.CHM(n),t.oxw().onDiscard()}),t._uU(1," Cancel "),t.qZA()}2&e&&t.Q6J("color","primary")}let A=(()=>{class e{constructor(){this.submitted=new C.x,this.discard=new C.x,this.ingredient$=new v.X(null),this.isEdit$=new v.X(!1),this.positiveNumbers=new RegExp(/^[1-9]+[0-9]*$/),this.form=new a.cw({name:new a.NI(null,a.kI.required),amount:new a.NI(null,[a.kI.required,a.kI.pattern(this.positiveNumbers)])}),this.onDestroy$=new C.x}set ingredient(n){this.isEdit$.value||this.isEdit$.next(!0),this.ingredient$.next(n)}ngOnInit(){this.ingredient$.pipe((0,T.R)(this.onDestroy$)).subscribe(n=>{n&&this.form.setValue(n)})}onSubmit(){this.form&&!this.form.invalid&&(this.submitted.next(this.form.value),this.form.reset())}onDiscard(){this.discard.next()}ngOnDestroy(){this.onDestroy$.next(),this.onDestroy$.complete()}isNewEditValue(){var n,i,o;return(null===(n=this.ingredient$.value)||void 0===n?void 0:n.name)!==(null===(o=null===(i=this.form)||void 0===i?void 0:i.get("name"))||void 0===o?void 0:o.value)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-edit-ingredient"]],inputs:{ingredient:"ingredient"},outputs:{submitted:"submitted",discard:"discard"},decls:16,vars:6,consts:[[3,"formGroup"],["appearance","fill"],["matInput","","formControlName","name","type","text","placeholder","Enter ingredient name: ","autocomplete","off"],["matInput","","formControlName","amount","type","number","placeholder","Amount of ingredients: ","autocomplete","off"],[1,"buttons"],["mat-raised-button","","type","button",3,"color","disabled","click"],["mat-stroked-button","","type","button",3,"color","click",4,"ngIf"],["mat-stroked-button","","type","button",3,"color","click"]],template:function(n,i){1&n&&(t.TgZ(0,"form",0)(1,"div")(2,"mat-form-field",1)(3,"mat-label"),t._uU(4,"Name"),t.qZA(),t._UZ(5,"input",2),t.qZA()(),t.TgZ(6,"div")(7,"mat-form-field",1)(8,"mat-label"),t._uU(9,"Amount"),t.qZA(),t._UZ(10,"input",3),t.qZA()(),t.TgZ(11,"div",4)(12,"button",5),t.NdJ("click",function(){return i.onSubmit()}),t._uU(13,"Save "),t.qZA(),t.YNc(14,$,2,1,"button",6),t.ALo(15,"async"),t.qZA()()),2&n&&(t.Q6J("formGroup",i.form),t.xp6(12),t.Q6J("color","primary")("disabled",null==i.form?null:i.form.invalid),t.xp6(2),t.Q6J("ngIf",t.lcZ(15,4,i.isEdit$)))},directives:[a._Y,a.JL,a.sg,x.KE,x.hX,b.Nt,a.Fj,a.JJ,a.u,a.wV,u.lW,d.O5],pipes:[d.Ov],styles:[".buttons[_ngcontent-%COMP%]{display:flex;gap:.625rem}"],changeDetection:0}),e})();var m=r(5698),Z=r(9300);let E=(()=>{class e{constructor(n,i,o){this.dialogRef=n,this.data=i,this.shoppingService=o}onSubmit(n){this.shoppingService.updateIngredient(this.data.name,n).pipe((0,m.q)(1)).subscribe(i=>{this.dialogRef.close(i)})}onDiscard(){this.dialogRef.close()}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(f.so),t.Y36(f.WI),t.Y36(p.sg))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-shopping-edit-modal"]],decls:3,vars:1,consts:[[1,"title"],[3,"ingredient","submitted","discard"]],template:function(n,i){1&n&&(t.TgZ(0,"h1",0),t._uU(1,"Edit Ingredient"),t.qZA(),t.TgZ(2,"app-edit-ingredient",1),t.NdJ("submitted",function(c){return i.onSubmit(c)})("discard",function(){return i.onDiscard()}),t.qZA()),2&n&&(t.xp6(2),t.Q6J("ingredient",i.data))},directives:[A],styles:[".title[_ngcontent-%COMP%]{margin-bottom:1.25rem}"],changeDetection:0}),e})();var g=(()=>((g||(g={})).ingredient="askAgainDeleteIngredient",g))();function O(e,s){if(1&e){const n=t.EpF();t.TgZ(0,"mat-card",2),t.NdJ("click",function(){const c=t.CHM(n).$implicit;return t.oxw(2).onEditItem(c)}),t.TgZ(1,"div",3)(2,"h1"),t._uU(3),t.qZA(),t.TgZ(4,"button",4),t.NdJ("click",function(o){const l=t.CHM(n).$implicit;return t.oxw(2).onDeleteItem(o,l)}),t.TgZ(5,"mat-icon"),t._uU(6,"delete"),t.qZA()()()()}if(2&e){const n=s.$implicit;t.Q6J("tabIndex",s.index),t.xp6(3),t.AsE("",n.name," (",n.amount,")"),t.xp6(1),t.Q6J("color","primary")}}function k(e,s){if(1&e&&(t.ynx(0),t.YNc(1,O,7,4,"mat-card",1),t.BQk()),2&e){const n=s.ngIf;t.xp6(1),t.Q6J("ngForOf",n)}}let J=(()=>{class e{constructor(n,i,o){this.shoppingService=n,this.notificationService=i,this.dialog=o,this.dontAsk=!0}ngOnInit(){this.ingredients$=this.shoppingService.getIngredients$(),this.dontAsk="true"===localStorage.getItem(g.ingredient)}onEditItem(n){this.dialog.open(E,{data:n}).afterClosed().pipe((0,m.q)(1),(0,Z.h)(i=>"boolean"==typeof i)).subscribe(i=>{i?this.notificationService.success(`Successfully updated ${n.name}!`):this.notificationService.error(`Couldn't find ${n.name}, try again!`)})}onDeleteItem(n,i){n.stopPropagation(),this.dontAsk?this.shoppingService.deleteIngredient(i.name,i).pipe((0,m.q)(1)).subscribe(o=>{o?this.notificationService.success(`Successfully deleted ${i.name}!`):this.notificationService.error(`Couldn't find ${i.name}, try again!`)}):this.dialog.open(p.YV,{data:{contentText:"Do you really want to delete this ingredient?",askAgain:!0,confirmText:"Delete"}}).afterClosed().pipe((0,m.q)(1),(0,Z.h)(o=>o&&"confirm"in o&&"askAgain"in o)).subscribe(o=>{var c,l;o.confirm&&(localStorage.setItem(g.ingredient,JSON.stringify(null!==(c=o.askAgain)&&void 0!==c&&c)),this.dontAsk=null!==(l=o.askAgain)&&void 0!==l&&l,this.shoppingService.deleteIngredient(i.name,i).pipe((0,m.q)(1)).subscribe(M=>{M?this.notificationService.success(`Successfully deleted ${i.name}!`):this.notificationService.error(`Couldn't find ${i.name}, try again!`)}))})}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(p.sg),t.Y36(p.gq),t.Y36(f.uw))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-shopping-list"]],decls:2,vars:3,consts:[[4,"ngIf"],["class","card",3,"tabIndex","click",4,"ngFor","ngForOf"],[1,"card",3,"tabIndex","click"],[1,"card__content"],["mat-mini-fab","",3,"color","click"]],template:function(n,i){1&n&&(t.YNc(0,k,2,1,"ng-container",0),t.ALo(1,"async")),2&n&&t.Q6J("ngIf",t.lcZ(1,1,i.ingredients$))},directives:[d.O5,d.sg,_.a8,u.lW,h.Hw],pipes:[d.Ov],styles:[".card[_ngcontent-%COMP%]{margin-top:.625rem}.card__content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.card[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0}"],changeDetection:0}),e})();function N(e,s){if(1&e){const n=t.EpF();t.ynx(0),t.TgZ(1,"app-edit-ingredient",5),t.NdJ("submitted",function(o){return t.CHM(n),t.oxw().onAddIngredient(o)}),t.qZA(),t.BQk()}}const D=[{path:"",pathMatch:"full",component:(()=>{class e{constructor(n){this.shoppingService=n,this.open$=new v.X(!1)}toggleOpen(){this.open$.next(!this.open$.value)}onAddIngredient(n){this.shoppingService.addIngredient(n)}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(p.sg))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-shopping"]],decls:12,vars:8,consts:[[1,"row"],[1,"col-xs-12"],["mat-button","",1,"icon-button",3,"color","click"],[1,"icon-button__content"],[4,"ngIf"],[3,"submitted"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"button",2),t.NdJ("click",function(){return i.toggleOpen()}),t.TgZ(3,"div",3)(4,"mat-icon"),t.ALo(5,"async"),t._uU(6,"add"),t.qZA(),t._uU(7," Add ingredient "),t.qZA()(),t.YNc(8,N,2,0,"ng-container",4),t.ALo(9,"async"),t._UZ(10,"mat-divider")(11,"app-shopping-list"),t.qZA()()),2&n&&(t.xp6(2),t.Q6J("color","primary"),t.xp6(2),t.ekj("active",t.lcZ(5,4,i.open$)),t.xp6(4),t.Q6J("ngIf",t.lcZ(9,6,i.open$)))},directives:[u.lW,h.Hw,d.O5,A,y.d,J],pipes:[d.Ov],styles:["mat-divider[_ngcontent-%COMP%]{margin:1.25rem 0}mat-icon[_ngcontent-%COMP%]{transition:.4s ease-out}mat-icon.active[_ngcontent-%COMP%]{transform:rotate(135deg)}app-edit-ingredient[_ngcontent-%COMP%]{display:block;margin-top:1rem}.icon-button[_ngcontent-%COMP%]{padding-right:1.5rem}"],changeDetection:0}),e})()}];let Q=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[I.Bz.forChild(D)],I.Bz]}),e})();const U=[d.ez,a.UX],w=[_.QW,b.c,u.ot,y.t,f.Is,h.Ps];let F=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[...U,...w,p.m8,Q]]}),e})()}}]);